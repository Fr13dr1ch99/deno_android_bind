diff '--color=auto' -ru -x Cargo.lock workdir-1/deno-1.36.1/build.rs workdir/deno-1.36.1/build.rs
--- workdir-1/deno-1.36.1/build.rs	2023-08-24 12:39:25.994292675 +0800
+++ workdir/deno-1.36.1/build.rs	2023-08-24 12:39:50.132504409 +0800
@@ -340,7 +340,6 @@
       deno_broadcast_channel::InMemoryBroadcastChannel::default(),
       false, // No --unstable.
     ),
-    deno_ffi::deno_ffi::init_ops::<PermissionsContainer>(false),
     deno_net::deno_net::init_ops::<PermissionsContainer>(
       None, false, // No --unstable.
       None,
@@ -400,12 +399,9 @@
   // Host snapshots won't work when cross compiling.
   let target = env::var("TARGET").unwrap();
   let host = env::var("HOST").unwrap();
-  if target != host {
-    panic!("Cross compiling with snapshot is not supported.");
-  }
 
   let symbols_path = std::path::Path::new("napi").join(
-    format!("generated_symbol_exports_list_{}.def", env::consts::OS).as_str(),
+    format!("generated_symbol_exports_list_{}.def", "linux").as_str(),
   )
   .canonicalize()
   .expect(
diff '--color=auto' -ru -x Cargo.lock workdir-1/deno-1.36.1/Cargo.toml workdir/deno-1.36.1/Cargo.toml
--- workdir-1/deno-1.36.1/Cargo.toml	2023-08-24 12:39:25.981292021 +0800
+++ workdir/deno-1.36.1/Cargo.toml	2023-08-24 12:39:50.134504509 +0800
@@ -385,3 +385,11 @@
 
 [target."cfg(windows)".build-dependencies.winres]
 version = "=0.1.12"
+
+[patch.crates-io]
+v8 = { path = "../v8-0.75.0" }
+deno_runtime = { path = "../deno_runtime-0.123.0" }
+deno_core = { path = "../deno_core-0.200.0" }
+serde_v8 = { path = "../serde_v8-0.111.0" }
+deno_fs = { path = "../deno_fs-0.25.0" }
+deno_node = { path = "../deno_node-0.52.0" }
diff '--color=auto' -ru -x Cargo.lock workdir-1/deno_core-0.200.0/Cargo.toml workdir/deno_core-0.200.0/Cargo.toml
--- workdir-1/deno_core-0.200.0/Cargo.toml	2023-08-24 12:39:26.205303285 +0800
+++ workdir/deno_core-0.200.0/Cargo.toml	2023-08-24 12:39:50.135504559 +0800
@@ -91,7 +91,7 @@
 ]
 
 [dependencies.v8]
-version = "0.74.3"
+version = "0.75.0"
 default-features = false
 
 [dev-dependencies.bencher]
diff '--color=auto' -ru -x Cargo.lock workdir-1/deno_core-0.200.0/runtime/jsruntime.rs workdir/deno_core-0.200.0/runtime/jsruntime.rs
--- workdir-1/deno_core-0.200.0/runtime/jsruntime.rs	2023-08-24 12:39:26.209303487 +0800
+++ workdir/deno_core-0.200.0/runtime/jsruntime.rs	2023-08-24 12:39:50.137504660 +0800
@@ -326,7 +326,7 @@
   #[repr(C, align(16))]
   struct IcuData([u8; 10541264]);
   static ICU_DATA: IcuData = IcuData(*include_bytes!("icudtl.dat"));
-  v8::icu::set_common_data_72(&ICU_DATA.0).unwrap();
+  v8::icu::set_common_data_73(&ICU_DATA.0).unwrap();
 
   let base_flags = concat!(
     " --wasm-test-streaming",
diff '--color=auto' -ru -x Cargo.lock workdir-1/deno_fs-0.25.0/std_fs.rs workdir/deno_fs-0.25.0/std_fs.rs
--- workdir-1/deno_fs-0.25.0/std_fs.rs	2023-08-24 12:39:26.212303638 +0800
+++ workdir/deno_fs-0.25.0/std_fs.rs	2023-08-24 12:39:50.139504760 +0800
@@ -62,7 +62,7 @@
       let _ = umask(prev);
       prev
     };
-    #[cfg(target_os = "linux")]
+    #[cfg(any(target_os = "linux", target_os = "android"))]
     {
       Ok(r.bits())
     }
diff '--color=auto' -ru -x Cargo.lock workdir-1/deno_node-0.52.0/ops/os.rs workdir/deno_node-0.52.0/ops/os.rs
--- workdir-1/deno_node-0.52.0/ops/os.rs	2023-08-24 12:39:26.216303839 +0800
+++ workdir/deno_node-0.52.0/ops/os.rs	2023-08-24 12:39:50.140504810 +0800
@@ -60,7 +60,7 @@
   use libc::id_t;
   use libc::PRIO_PROCESS;
 
-  #[cfg(target_os = "macos")]
+  #[cfg(any(target_os = "macos", target_os = "android"))]
   #[allow(non_camel_case_types)]
   type priority_t = i32;
   #[cfg(target_os = "linux")]
diff '--color=auto' -ru -x Cargo.lock workdir-1/deno_node-0.52.0/polyfills/internal_binding/uv.ts workdir/deno_node-0.52.0/polyfills/internal_binding/uv.ts
--- workdir-1/deno_node-0.52.0/polyfills/internal_binding/uv.ts	2023-08-24 12:39:26.233304694 +0800
+++ workdir/deno_node-0.52.0/polyfills/internal_binding/uv.ts	2023-08-24 12:39:50.141504860 +0800
@@ -494,6 +494,8 @@
     ? codeToErrorDarwin
     : osType === "linux"
     ? codeToErrorLinux
+    : osType === "android"
+    ? codeToErrorLinux
     : osType === "freebsd"
     ? codeToErrorFreebsd
     : osType === "openbsd"
@@ -508,6 +510,8 @@
     ? errorToCodeDarwin
     : osType === "linux"
     ? errorToCodeLinux
+    : osType === "android"
+    ? errorToCodeLinux
     : osType === "freebsd"
     ? errorToCodeFreebsd
     : osType === "openbsd"
diff '--color=auto' -ru -x Cargo.lock workdir-1/deno_node-0.52.0/polyfills/_util/os.ts workdir/deno_node-0.52.0/polyfills/_util/os.ts
--- workdir-1/deno_node-0.52.0/polyfills/_util/os.ts	2023-08-24 12:39:26.222304140 +0800
+++ workdir/deno_node-0.52.0/polyfills/_util/os.ts	2023-08-24 12:39:50.142504910 +0800
@@ -2,7 +2,7 @@
 
 const { ops } = globalThis.__bootstrap.core;
 
-export type OSType = "windows" | "linux" | "darwin" | "freebsd" | "openbsd";
+export type OSType = "windows" | "linux" | "android" | "darwin" | "freebsd" | "openbsd";
 
 export const osType: OSType = ops.op_node_build_os();
 
diff '--color=auto' -ru -x Cargo.lock workdir-1/deno_runtime-0.123.0/build.rs workdir/deno_runtime-0.123.0/build.rs
--- workdir-1/deno_runtime-0.123.0/build.rs	2023-08-24 12:39:26.239304995 +0800
+++ workdir/deno_runtime-0.123.0/build.rs	2023-08-24 12:39:50.143504960 +0800
@@ -107,15 +107,6 @@
     }
   }
 
-  impl deno_ffi::FfiPermissions for Permissions {
-    fn check_partial(
-      &mut self,
-      _path: Option<&Path>,
-    ) -> Result<(), deno_core::error::AnyError> {
-      unreachable!("snapshotting!")
-    }
-  }
-
   impl deno_napi::NapiPermissions for Permissions {
     fn check(
       &mut self,
@@ -257,7 +248,6 @@
       deno_broadcast_channel,
       // FIXME(bartlomieju): this should be reenabled
       // "deno_node",
-      deno_ffi,
       deno_net,
       deno_napi,
       deno_http,
@@ -333,7 +323,6 @@
         deno_broadcast_channel::InMemoryBroadcastChannel::default(),
         false, // No --unstable.
       ),
-      deno_ffi::deno_ffi::init_ops_and_esm::<Permissions>(false),
       deno_net::deno_net::init_ops_and_esm::<Permissions>(
         None, false, // No --unstable.
         None,
diff '--color=auto' -ru -x Cargo.lock workdir-1/deno_runtime-0.123.0/Cargo.toml workdir/deno_runtime-0.123.0/Cargo.toml
--- workdir-1/deno_runtime-0.123.0/Cargo.toml	2023-08-24 12:39:26.239304995 +0800
+++ workdir/deno_runtime-0.123.0/Cargo.toml	2023-08-24 12:39:50.164506013 +0800
@@ -62,9 +62,6 @@
 [dependencies.deno_fetch]
 version = "0.139.0"
 
-[dependencies.deno_ffi]
-version = "0.102.0"
-
 [dependencies.deno_fs]
 version = "0.25.0"
 features = ["sync_fs"]
@@ -202,9 +199,6 @@
 [build-dependencies.deno_fetch]
 version = "0.139.0"
 
-[build-dependencies.deno_ffi]
-version = "0.102.0"
-
 [build-dependencies.deno_fs]
 version = "0.25.0"
 features = ["sync_fs"]
diff '--color=auto' -ru -x Cargo.lock workdir-1/deno_runtime-0.123.0/js/10_permissions.js workdir/deno_runtime-0.123.0/js/10_permissions.js
--- workdir-1/deno_runtime-0.123.0/js/10_permissions.js	2023-08-24 12:39:26.240305046 +0800
+++ workdir/deno_runtime-0.123.0/js/10_permissions.js	2023-08-24 12:39:50.167506163 +0800
@@ -33,7 +33,7 @@
  * @property {boolean} partial
  */
 
-/** @type {ReadonlyArray<"read" | "write" | "net" | "env" | "sys" | "run" | "ffi" | "hrtime">} */
+/** @type {ReadonlyArray<"read" | "write" | "net" | "env" | "sys" | "run" | "hrtime">} */
 const permissionNames = [
   "read",
   "write",
@@ -41,7 +41,6 @@
   "env",
   "sys",
   "run",
-  "ffi",
   "hrtime",
 ];
 
@@ -129,7 +128,7 @@
 function cache(desc, rawStatus) {
   let { name: key } = desc;
   if (
-    (desc.name === "read" || desc.name === "write" || desc.name === "ffi") &&
+    (desc.name === "read" || desc.name === "write") &&
     ReflectHas(desc, "path")
   ) {
     key += `-${desc.path}&`;
@@ -180,7 +179,7 @@
  */
 function formDescriptor(desc) {
   if (
-    desc.name === "read" || desc.name === "write" || desc.name === "ffi"
+    desc.name === "read" || desc.name === "write"
   ) {
     desc.path = pathFromURL(desc.path);
   } else if (desc.name === "run") {
@@ -266,7 +265,7 @@
   if (typeof permissions == "object" && permissions != null) {
     const serializedPermissions = {};
     for (
-      const key of new SafeArrayIterator(["read", "write", "run", "ffi"])
+      const key of new SafeArrayIterator(["read", "write", "run"])
     ) {
       if (ArrayIsArray(permissions[key])) {
         serializedPermissions[key] = ArrayPrototypeMap(
diff '--color=auto' -ru -x Cargo.lock workdir-1/deno_runtime-0.123.0/js/90_deno_ns.js workdir/deno_runtime-0.123.0/js/90_deno_ns.js
--- workdir-1/deno_runtime-0.123.0/js/90_deno_ns.js	2023-08-24 12:39:26.241305096 +0800
+++ workdir/deno_runtime-0.123.0/js/90_deno_ns.js	2023-08-24 12:39:50.170506314 +0800
@@ -5,7 +5,6 @@
 import * as timers from "ext:deno_web/02_timers.js";
 import * as httpClient from "ext:deno_fetch/22_http_client.js";
 import * as console from "ext:deno_console/01_console.js";
-import * as ffi from "ext:deno_ffi/00_ffi.js";
 import * as net from "ext:deno_net/01_net.js";
 import * as tls from "ext:deno_net/02_tls.js";
 import * as http from "ext:deno_http/01_http.js";
@@ -163,11 +162,6 @@
   createHttpClient: httpClient.createHttpClient,
   // TODO(bartlomieju): why is it needed?
   http,
-  dlopen: ffi.dlopen,
-  UnsafeCallback: ffi.UnsafeCallback,
-  UnsafePointer: ffi.UnsafePointer,
-  UnsafePointerView: ffi.UnsafePointerView,
-  UnsafeFnPointer: ffi.UnsafeFnPointer,
   flock: fs.flock,
   flockSync: fs.flockSync,
   funlock: fs.funlock,
diff '--color=auto' -ru -x Cargo.lock workdir-1/deno_runtime-0.123.0/lib.rs workdir/deno_runtime-0.123.0/lib.rs
--- workdir-1/deno_runtime-0.123.0/lib.rs	2023-08-24 12:39:26.241305096 +0800
+++ workdir/deno_runtime-0.123.0/lib.rs	2023-08-24 12:39:50.172506414 +0800
@@ -6,7 +6,6 @@
 pub use deno_core;
 pub use deno_crypto;
 pub use deno_fetch;
-pub use deno_ffi;
 pub use deno_fs;
 pub use deno_http;
 pub use deno_io;
diff '--color=auto' -ru -x Cargo.lock workdir-1/deno_runtime-0.123.0/ops/os/mod.rs workdir/deno_runtime-0.123.0/ops/os/mod.rs
--- workdir-1/deno_runtime-0.123.0/ops/os/mod.rs	2023-08-24 12:39:26.242305146 +0800
+++ workdir/deno_runtime-0.123.0/ops/os/mod.rs	2023-08-24 12:39:50.175506564 +0800
@@ -305,7 +305,7 @@
   }
 }
 
-#[cfg(target_os = "linux")]
+#[cfg(any(target_os = "linux", target_os = "android"))]
 fn rss() -> usize {
   // Inspired by https://github.com/Arc-blroth/memory-stats/blob/5364d0d09143de2a470d33161b2330914228fde9/src/linux.rs
 
diff '--color=auto' -ru -x Cargo.lock workdir-1/deno_runtime-0.123.0/ops/os/sys_info.rs workdir/deno_runtime-0.123.0/ops/os/sys_info.rs
--- workdir-1/deno_runtime-0.123.0/ops/os/sys_info.rs	2023-08-24 12:39:26.242305146 +0800
+++ workdir/deno_runtime-0.123.0/ops/os/sys_info.rs	2023-08-24 12:39:50.179506765 +0800
@@ -6,7 +6,7 @@
 const DEFAULT_LOADAVG: LoadAvg = (0.0, 0.0, 0.0);
 
 pub fn loadavg() -> LoadAvg {
-  #[cfg(target_os = "linux")]
+  #[cfg(any(target_os = "linux", target_os = "android"))]
   {
     use libc::SI_LOAD_SHIFT;
 
@@ -117,6 +117,10 @@
       )
     }
   }
+  #[cfg(target_os = "android")]
+  {
+    String::from("")
+  }
 }
 
 #[cfg(target_family = "windows")]
@@ -198,7 +202,7 @@
     swap_total: 0,
     swap_free: 0,
   };
-  #[cfg(target_os = "linux")]
+  #[cfg(any(target_os = "linux", target_os = "android"))]
   {
     let mut info = std::mem::MaybeUninit::uninit();
     // SAFETY: `info` is a valid pointer to a `libc::sysinfo` struct.
@@ -331,7 +335,7 @@
 pub fn os_uptime() -> u64 {
   let uptime: u64;
 
-  #[cfg(target_os = "linux")]
+  #[cfg(any(target_os = "linux", target_os = "android"))]
   {
     let mut info = std::mem::MaybeUninit::uninit();
     // SAFETY: `info` is a valid pointer to a `libc::sysinfo` struct.
diff '--color=auto' -ru -x Cargo.lock workdir-1/deno_runtime-0.123.0/permissions/mod.rs workdir/deno_runtime-0.123.0/permissions/mod.rs
--- workdir-1/deno_runtime-0.123.0/permissions/mod.rs	2023-08-24 12:39:26.243305196 +0800
+++ workdir/deno_runtime-0.123.0/permissions/mod.rs	2023-08-24 12:39:50.184507016 +0800
@@ -1464,13 +1464,6 @@
   }
 }
 
-impl deno_ffi::FfiPermissions for PermissionsContainer {
-  #[inline(always)]
-  fn check_partial(&mut self, path: Option<&Path>) -> Result<(), AnyError> {
-    self.0.lock().ffi.check_partial(path)
-  }
-}
-
 impl deno_kv::sqlite::SqliteDbHandlerPermissions for PermissionsContainer {
   #[inline(always)]
   fn check_read(&mut self, p: &Path, api_name: &str) -> Result<(), AnyError> {
diff '--color=auto' -ru -x Cargo.lock workdir-1/deno_runtime-0.123.0/web_worker.rs workdir/deno_runtime-0.123.0/web_worker.rs
--- workdir-1/deno_runtime-0.123.0/web_worker.rs	2023-08-24 12:39:26.243305196 +0800
+++ workdir/deno_runtime-0.123.0/web_worker.rs	2023-08-24 12:39:50.187507166 +0800
@@ -433,7 +433,6 @@
         options.broadcast_channel.clone(),
         unstable,
       ),
-      deno_ffi::deno_ffi::init_ops_and_esm::<PermissionsContainer>(unstable),
       deno_net::deno_net::init_ops_and_esm::<PermissionsContainer>(
         options.root_cert_store_provider.clone(),
         unstable,
diff '--color=auto' -ru -x Cargo.lock workdir-1/deno_runtime-0.123.0/worker.rs workdir/deno_runtime-0.123.0/worker.rs
--- workdir-1/deno_runtime-0.123.0/worker.rs	2023-08-24 12:39:26.243305196 +0800
+++ workdir/deno_runtime-0.123.0/worker.rs	2023-08-24 12:39:50.189507266 +0800
@@ -334,7 +334,6 @@
         options.broadcast_channel.clone(),
         unstable,
       ),
-      deno_ffi::deno_ffi::init_ops_and_esm::<PermissionsContainer>(unstable),
       deno_net::deno_net::init_ops_and_esm::<PermissionsContainer>(
         options.root_cert_store_provider.clone(),
         unstable,
diff '--color=auto' -ru -x Cargo.lock workdir-1/serde_v8-0.111.0/Cargo.toml workdir/serde_v8-0.111.0/Cargo.toml
--- workdir-1/serde_v8-0.111.0/Cargo.toml	2023-08-24 12:39:26.245305297 +0800
+++ workdir/serde_v8-0.111.0/Cargo.toml	2023-08-24 12:39:50.190507316 +0800
@@ -58,7 +58,7 @@
 version = "1.0.40"
 
 [dependencies.v8]
-version = "0.74.3"
+version = "0.75.0"
 default-features = false
 
 [dev-dependencies.bencher]
diff '--color=auto' -ru -x Cargo.lock workdir-1/v8-0.75.0/build.rs workdir/v8-0.75.0/build.rs
--- workdir-1/v8-0.75.0/build.rs	2023-08-24 12:39:26.297307912 +0800
+++ workdir/v8-0.75.0/build.rs	2023-08-24 12:39:50.213508469 +0800
@@ -145,7 +145,7 @@
     let clang_base_path = clang_download();
     gn_args.push(format!("clang_base_path={:?}", clang_base_path));
 
-    if cfg!(target_os = "android") && cfg!(target_arch = "aarch64") {
+    if cfg!(target_os = "android") {
       gn_args.push("treat_warnings_as_errors=false".to_string());
     }
   }
@@ -180,9 +180,19 @@
       maybe_install_sysroot("arm64");
       maybe_install_sysroot("amd64");
     };
+    if target_triple == "x86_64-linux-android" {
+      gn_args.push(r#"target_cpu="x64""#.to_string());
+      gn_args.push("use_sysroot=true".to_string());
+      maybe_install_sysroot("amd64");
+    }
 
-    if target_triple == "aarch64-linux-android" {
-      gn_args.push(r#"v8_target_cpu="arm64""#.to_string());
+    if target_triple.contains("android") {
+      if target_triple == "aarch64-linux-android" {
+        gn_args.push(r#"v8_target_cpu="arm64""#.to_string());
+      }
+      if target_triple == "x86_64-linux-android" {
+        gn_args.push(r#"v8_target_cpu="x64""#.to_string());
+      }
       gn_args.push(r#"target_os="android""#.to_string());
 
       gn_args.push("treat_warnings_as_errors=false".to_string());
